@import "tailwindcss";

/* =====================================================
   Keyframe Animations
   ===================================================== */
@keyframes winPulse {
  0%   { transform: scale(1); }
  40%  { transform: scale(1.12); }
  70%  { transform: scale(0.96); }
  100% { transform: scale(1.05); }
}

@keyframes fadeSlideIn {
  from { opacity: 0; transform: translateY(-12px) scale(0.95); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

/* Tailwind Preflight may not enforce [hidden]; be explicit */
[hidden] { display: none !important; }

/* CSS custom properties for fluid sizing */
:root {
  --cell-size: clamp(80px, 26vw, 140px);
  --gap: clamp(8px, 2vw, 14px);
  --font-cell: clamp(2rem, 10vw, 4rem);
}

/* Tap highlight suppression â€” not expressible as a Tailwind utility */
.cell {
  -webkit-tap-highlight-color: transparent;
  font-size: var(--font-cell);
  width: var(--cell-size);
  height: var(--cell-size);
}

/* Board sizing with custom properties */
.board {
  grid-template-columns: repeat(3, var(--cell-size));
  grid-template-rows: repeat(3, var(--cell-size));
  gap: var(--gap);
  padding: var(--gap);
}

/* Mark pop-in animation via pseudo-element */
.cell::after {
  content: attr(data-mark);
  display: block;
  opacity: 0;
  transform: scale(0.4) rotate(-15deg);
  transition:
    opacity 300ms cubic-bezier(0.34, 1.56, 0.64, 1),
    transform 300ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

.cell[data-mark="X"]::after,
.cell[data-mark="O"]::after {
  opacity: 1;
  transform: scale(1) rotate(0deg);
}

.cell[data-mark="X"]::after {
  color: #60a5fa;
}

.cell[data-mark="O"]::after {
  color: #f87171;
}

/* Hover state for empty cells */
.cell:not([data-mark]):hover,
.cell[data-mark=""]:hover {
  background-color: #273549;
  border-color: #818cf8;
  transform: scale(1.03);
}

/* Focus-visible ring on cells */
.cell:focus-visible {
  border-color: #818cf8;
  box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.4);
}

/* Small viewport overrides */
@media (max-width: 480px) {
  body {
    align-items: flex-start;
    padding-top: 2rem;
    padding-left: 0.5rem;
    padding-right: 0.5rem;
    padding-bottom: 1rem;
  }

  .board {
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    width: min(92vw, 360px);
    padding: clamp(6px, 1.5vw, 10px);
    gap: clamp(6px, 1.5vw, 10px);
  }

  .cell {
    width: 100%;
    height: auto;
  }
}

/* Reduced motion overrides */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation: none !important;
    transition: none !important;
  }
}

@layer utilities {
  /* Winning cell highlight styles */
  .cell-winning-x {
    background-color: rgba(96, 165, 250, 0.2);
    border-color: #60a5fa;
    box-shadow:
      0 0 0 2px #60a5fa,
      0 0 20px rgba(96, 165, 250, 0.25),
      inset 0 0 20px rgba(96, 165, 250, 0.25);
  }

  .cell-winning-o {
    background-color: rgba(248, 113, 113, 0.2);
    border-color: #f87171;
    box-shadow:
      0 0 0 2px #f87171,
      0 0 20px rgba(248, 113, 113, 0.25),
      inset 0 0 20px rgba(248, 113, 113, 0.25);
  }

  /* Win pulse animation utility */
  .animate-win-pulse {
    animation: winPulse 600ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  /* Fade-slide-in animation utility */
  .animate-fade-slide-in {
    animation: fadeSlideIn 400ms cubic-bezier(0.34, 1.56, 0.64, 1) both;
  }

  /* Gradient text for the title */
  .text-gradient-title {
    background: linear-gradient(135deg, #60a5fa 0%, #818cf8 50%, #f87171 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* game-over board disables pointer events */
  .game-over {
    pointer-events: none;
  }

  /* Status message colour variants */
  .status-player-x {
    color: #60a5fa;
  }

  .status-player-o {
    color: #f87171;
  }
}
